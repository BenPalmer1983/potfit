
<!--#include virtual="potfithead.html" -->

<!-- Copyright (c)  2005  Peter Brommer, Franz Gaehler, ITAP.              -->
<!-- Permission is granted to copy, distribute and/or modify this document -->
<!-- under the terms of the GNU Free Documentation License, Version 1.2    -->
<!-- or any later version published by the Free Software Foundation;       -->
<!-- with Invariant Sections being the files potfit.html/index.html and    -->
<!-- licence.html, the Front-Cover Text "potfit - a force-matching         -->
<!-- program", and the Back-Cover Text "potfit was originally developed by -->
<!-- Peter Brommer during his diploma thesis work."                        -->
<!-- A copy of the license is included in the section entitled             -->
<!-- "Licence - Documentation".                                            -->

<h1>Developer's Corner</h1>

<p>
Here we give some hints on how to extend <em>potfit</em>. In
particular, we list some common pitfalls that are to be avoided.</p>

<h2>Indentation</h2>
<p><em>potfit</em> is indented according to the default emacs indentation. The
same effect can be achieved with the <img src="localicons/linkexternicon.gif"
alt="External Link" /> <a href="http://www.gnu.org/software/indent/">GNU indent
command</a>, version >=2.2.10, using the following command:</p>
<pre>
indent -gnu -cdw -cli4 -npsl -npcs -di6 -ncs -ce -br -brs \
  -T real -T apot_table_t -T pot_table_t -T vektor \
  -T stens -T neigh_t -T atom_t -T FILE *.[ch]
</pre> 
<p>Sections that are NOT to be indented in this way are to be marked with</p>
<pre>/* *INDENT-OFF* */</pre> 
<p>at their beginning and </p>
<pre>/* *INDENT-ON* */</pre>  
<p>at their end, each control comment on a line of its own.</p>

<h2>Introducing new parameters</h2>

<p>
Before a new parameter can be used, it must be</p>
<ul>
<li>declared and initialized to default value (in file potfit.h)</li>
<li>read into <em>potfit</em> (routine getparamfile() in file param.c)</li>
<li>possibly checked for nonsense values (routine
    check_parameters_complete() in file param.c)</li>
<li>broadcast to the other CPUs (routine broadcast_params() in
    file mpi_utils.c)</li>
</ul>

<h2>Revision control system: CVS</h2>

<p>
<em>potfit</em> is maintained with the revision control system CVS. It is
desirable to include the following lines of comment at the 
beginning of each new source code file:</p>

<pre>
/****************************************************************
* $Revision: 1.3 $
* $Date: 2008/09/18 14:34:21 $
*****************************************************************/
</pre>

<p>
CVS replaces these lines automatically with the correct
version number and date, if the new file is checked into the CVS 
repository.</p>

<h2>Naming conventions for files</h2>

<ul>
<li> Source files are all named with lower case letters</li>
<li> Non-source files in the source directory begin with a capital letter
     (e.g. Makefile, README, INSTALL)</li>
<li> Documentation should be written, in English and in HTML.</li>
</ul>


<!--#include virtual="potfitfoot.html" -->
